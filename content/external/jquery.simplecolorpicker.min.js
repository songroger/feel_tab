(function(b){var a=function(c,d){this.init("simplecolorpicker",c,d)};a.prototype={constructor:a,init:function(h,c,f){var e=this;e.type=h;e.$select=b(c);var g=e.$select.val();e.options=b.extend({},b.fn.simplecolorpicker.defaults,f);e.$select.hide();var j="&nbsp;&nbsp;&nbsp;&nbsp;";e.$colorList=null;if(e.options.picker){var i=e.$select.find("option:selected").text();e.$icon=b('<span class="simplecolorpicker icon" title="'+i+'" style="background-color: '+g+'" role="button" tabindex="0">'+j+"</span>").insertAfter(e.$select);e.$icon.on("click."+e.type,b.proxy(e.showPicker,e));e.$picker=b('<span class="simplecolorpicker picker"></span>').appendTo(document.body);e.$colorList=e.$picker;b(document).on("mousedown."+e.type,b.proxy(e.hidePicker,e));e.$picker.on("mousedown."+e.type,b.proxy(e.mousedown,e))}else{e.$inline=b('<span class="simplecolorpicker inline"></span>').insertAfter(e.$select);e.$colorList=e.$inline}var d="";b("option",e.$select).each(function(){var m=b(this);var k=m.val();var n=m.text();var l="";if(m.prop("selected")===true||g===k){l='class="selected"'}d+="<div "+l+' title="'+n+'" style="background-color: '+k+'" data-color="'+k+'" role="button" tabindex="0">'+j+"</div>"});e.$colorList.html(d);e.$colorList.on("click."+e.type,b.proxy(e.click,e))},selectColor:function(d){var c=this;var e=c.$colorList.find("div").filter(function(){return b(this).data("color").toLowerCase()===d.toLowerCase()});if(e.length>0){c.selectColorDiv(e)}else{console.error("The given color '"+d+"' could not be found")}},showPicker:function(){var c=16;var d=this.$icon.offset();this.$picker.css({left:d.left+this.$icon.width()/2-c,top:d.top+this.$icon.outerHeight()});this.$picker.show(this.options.delay)},hidePicker:function(){this.$picker.hide(this.options.delay)},selectColorDiv:function(d){var c=d.data("color");var e=d.prop("title");d.siblings().removeClass("selected");d.addClass("selected");if(this.options.picker){this.$icon.css("background-color",c);this.$icon.prop("title",e);this.hidePicker()}this.$select.val(c)},click:function(d){var c=b(d.target);if(c.length===1){if(c[0].nodeName.toLowerCase()==="div"){this.selectColorDiv(c);this.$select.trigger("change")}}},mousedown:function(c){c.stopPropagation();c.preventDefault()},destroy:function(){if(this.options.picker){this.$icon.off("."+this.type);this.$icon.remove();b(document).off("."+this.type)}this.$colorList.off("."+this.type);this.$colorList.remove();this.$select.removeData(this.type);this.$select.show()}};b.fn.simplecolorpicker=function(d){var c=b.makeArray(arguments);c.shift();return this.each(function(){var g=b(this),f=g.data("simplecolorpicker"),e=typeof d==="object"&&d;if(f===undefined){g.data("simplecolorpicker",(f=new a(this,e)))}if(typeof d==="string"){f[d].apply(f,c)}})};b.fn.simplecolorpicker.defaults={delay:0,picker:false}})(jQuery);